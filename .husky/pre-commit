echo "üöÄ Pre-commit checks iniciando...\n"

# 1. Verifica data-testid nos componentes
echo "1Ô∏è‚É£  Verificando test IDs..."
node scripts/check-test-ids.js
if [ $? -ne 0 ]; then
  echo "\n‚ùå Commit bloqueado: Adicione data-testid aos elementos"
  exit 1
fi

# 2. Verifica acessibilidade
echo "2Ô∏è‚É£  Verificando acessibilidade..."
node scripts/check-accessibility.js
if [ $? -ne 0 ]; then
  echo "\n‚ùå Commit bloqueado: Corrija os problemas de acessibilidade"
  exit 1
fi

# 3. Roda os testes
echo "3Ô∏è‚É£  Executando testes..."
yarn test --run --reporter=verbose
if [ $? -ne 0 ]; then
  echo "\n‚ùå Commit bloqueado: Testes falharam"
  exit 1
fi

# 4. Lint staged files
echo "4Ô∏è‚É£  Rodando linter..."
npx lint-staged
if [ $? -ne 0 ]; then
  echo "\n‚ùå Commit bloqueado: Corrija os erros de lint"
  exit 1
fi

echo "\n‚úÖ Todas as verifica√ß√µes passaram! Commit permitido.\n"
